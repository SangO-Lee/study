<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vue test</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="app">
        <div class="app-wrap">
            <input type="checkbox" v-model="chbxVal">
            <p>{{isImportant}}</p>
            <input type="range" v-model="rangeVal">
            <p>{{rangeVal}}</p>

            <div class="mousearea" @:click="updatePos"></div>
            <p>{{xDiff}}</p>
        </div>
    </div>

    <script type="module">
         const app = Vue.createApp({
            data(){
                return {
                   chbxVal: false,
                   rangeVal: 80,
                   xPos:0,
                   xDiff:0,
                }
            },
            watch:{
                rangeVal(val){
                    if(val>20 && val<60){
                        if(val<40){
                            this.rangeVal = 20;
                        }else{
                            this.rangeVal = 60;
                        }
                    }
                },
                xPos(newVal, oldVal){
                    this.xDiff = newVal - oldVal
                }

            },
            computed:{
                //복잡한 로직 연산이 많을 경우 사용
                // 계산값을 캐싱하여 저장하기 때문에, 같은 입력값일 경우 이전 캐싱된 값을 다시 반환함
                //data 속성이 변경될 때 작동함
                isImportant() {
                    if(this.chbxVal){
                            return 'yes'
                            }
                            else {
                            return 'no'
                        }
                    }
            },
            methods:{
                // 계산값을 캐싱하지 않음
                // update가 일어나면 모든 함수를 재실행
                isImportant2() {
                    if(this.chbxVal){
                        return 'yes'
                        }
                        else {
                        return 'no'
                    }
                },
                updatePos(evt){
                    this.xPos = evt.offsetX

                }
            }
         })

         app.mount('#app')

    </script>

    <style lang="scss">
        *{
            box-sizing: border-box;
        }
        body{
            margin:0;
        }
        .app-wrap{
            width:800px;
            max-width: 100%;
            margin:0 auto;
            padding:30px;
            font-size: 14px;
        }
        .mousearea{
            width:300px;
            height:100px;
            background:beige;
        }
    </style>
</body>
</html>
